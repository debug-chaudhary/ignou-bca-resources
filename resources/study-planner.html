<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study Planner | IGNOU BCA</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <main class="main-content">
        <div class="container">
            <div class="study-planner">
                <h2>Personal Study Planner</h2>
                
                <div class="planner-controls">
                    <input type="date" id="studyDate">
                    <input type="text" id="studyTopic" placeholder="Topic to study">
                    <select id="studySubject">
                        <option value="">Select Subject</option>
                        <option value="bcs011">BCS-011 Computer Fundamentals</option>
                        <option value="bcs012">BCS-012 Basic Mathematics</option>
                    </select>
                    <button onclick="addStudySession()">Add Study Session</button>
                </div>

                <div class="study-calendar">
                    <h3>This Week's Study Plan</h3>
                    <div class="weekly-view" id="weeklyPlanner">
                        <!-- Study sessions will be populated here -->
                    </div>
                </div>

                <div class="study-stats">
                    <h3>Study Statistics</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-number" id="totalHours">0</span>
                            <span class="stat-label">Hours This Week</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number" id="completedSessions">0</span>
                            <span class="stat-label">Completed Sessions</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        class StudyPlanner {
            constructor() {
                this.sessions = JSON.parse(localStorage.getItem('studySessions') || '[]');
                this.renderWeeklyView();
                this.updateStats();
            }

            addSession(date, topic, subject, duration = 1) {
                const session = {
                    id: Date.now(),
                    date,
                    topic,
                    subject,
                    duration,
                    completed: false
                };
                
                this.sessions.push(session);
                this.saveToStorage();
                this.renderWeeklyView();
                this.updateStats();
            }

            saveToStorage() {
                localStorage.setItem('studySessions', JSON.stringify(this.sessions));
            }

            renderWeeklyView() {
                const container = document.getElementById('weeklyPlanner');
                const thisWeekSessions = this.getThisWeekSessions();
                
                container.innerHTML = thisWeekSessions.map(session => `
                    <div class="study-session ${session.completed ? 'completed' : ''}">
                        <div class="session-date">${session.date}</div>
                        <div class="session-topic">${session.topic}</div>
                        <div class="session-subject">${session.subject}</div>
                        <button onclick="studyPlanner.markCompleted(${session.id})">
                            ${session.completed ? 'âœ“ Completed' : 'Mark Complete'}
                        </button>
                    </div>
                `).join('');
            }

            getThisWeekSessions() {
                const now = new Date();
                const startOfWeek = new Date(now.setDate(now.getDate() - now.getDay()));
                const endOfWeek = new Date(now.setDate(now.getDate() - now.getDay() + 6));
                
                return this.sessions.filter(session => {
                    const sessionDate = new Date(session.date);
                    return sessionDate >= startOfWeek && sessionDate <= endOfWeek;
                });
            }

            markCompleted(sessionId) {
                const session = this.sessions.find(s => s.id === sessionId);
                if (session) {
                    session.completed = true;
                    this.saveToStorage();
                    this.renderWeeklyView();
                    this.updateStats();
                }
            }

            updateStats() {
                const thisWeekSessions = this.getThisWeekSessions();
                const totalHours = thisWeekSessions.reduce((sum, s) => sum + s.duration, 0);
                const completedSessions = thisWeekSessions.filter(s => s.completed).length;
                
                document.getElementById('totalHours').textContent = totalHours;
                document.getElementById('completedSessions').textContent = completedSessions;
            }
        }

        // Initialize study planner
        const studyPlanner = new StudyPlanner();

        function addStudySession() {
            const date = document.getElementById('studyDate').value;
            const topic = document.getElementById('studyTopic').value;
            const subject = document.getElementById('studySubject').value;
            
            if (date && topic && subject) {
                studyPlanner.addSession(date, topic, subject);
                
                // Clear form
                document.getElementById('studyTopic').value = '';
                document.getElementById('studySubject').value = '';
            } else {
                alert('Please fill all fields');
            }
        }
    </script>
</body>
</html>
